CREATE TABLE INFO_ORGANIZATION
(
	ID					INT GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
	PARENT_ID			INT,
	
	ORDER_CODE			VARCHAR(50),
	
	SHORT_NAME			VARCHAR(250) NOT NULL,
	FULL_NAME			VARCHAR(300) NOT NULL,
	
	INN					VARCHAR(9),
	PHONE_NUMBER		VARCHAR(250),
	DIRECTOR			VARCHAR(250) NULL,
	VAT_CODE			VARCHAR(12) NULL,
	ZIP_CODE			VARCHAR(50) NULL,
	BANK_ID				INT, -- Nullable chunki boshqa organization ham bo'lishi mumkin

	COUNTRY_ID			INT NOT NULL,
	REGION_ID			INT NOT NULL,
	DISTRICT_ID			INT,
	ADDRESS				VARCHAR(500) NULL,
	LATITUDE			VARCHAR(50),
	LONGITUDE			VARCHAR(50),

	IS_DELETED			BOOL NOT NULL DEFAULT FALSE,
 	STATE_ID   			INT NOT NULL,	
 	CREATED_AT    		TIMESTAMP WITHOUT TIME ZONE DEFAULT CURRENT_TIMESTAMP NOT NULL,
 	CREATED_BY		    INT NULL,
 	MODIFIED_AT   		TIMESTAMP WITHOUT TIME ZONE,
 	MODIFIED_BY   		INT,
 
	CONSTRAINT FK_COUNTRY_ID 
		FOREIGN KEY ( COUNTRY_ID )
			REFERENCES INFO_COUNTRY ( ID ),
	CONSTRAINT FK_REGION_ID 
		FOREIGN KEY ( REGION_ID )
			REFERENCES INFO_REGION ( ID ),
	CONSTRAINT FK_DISTRICT_ID 
		FOREIGN KEY ( DISTRICT_ID )
			REFERENCES INFO_DISTRICT ( ID ),
	CONSTRAINT FK_STATE_ID 
		FOREIGN KEY ( STATE_ID ) 
			REFERENCES ENUM_STATE ( ID ),
	CONSTRAINT FK_PARENT_ID
		FOREIGN KEY ( PARENT_ID ) 
			REFERENCES INFO_ORGANIZATION ( ID ),
 	CONSTRAINT FK_BANK_ID 
		FOREIGN KEY ( BANK_ID )
			 REFERENCES INFO_BANK ( ID )
);

CREATE UNIQUE INDEX UIX__INFO_ORGANIZATION_UNIQUE_INDEX_INN 
	ON INFO_ORGANIZATION (INN);